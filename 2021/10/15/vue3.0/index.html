<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="google-site-verification" content="TZE0rZyIqLl10trYu3BWBWa1Vmz6HFwhb2OcNEK4u-s" />
     <link rel="shortcut icon" href= /img/favicon.ico >
    <title>
        å¶å­çš„çŸ¥è¯†æ ‘
    </title>
    <meta name="description" content= å˜¿ï¼Œæˆ‘æ˜¯å¶å­é¸­ï½è¿™æ˜¯æˆ‘çš„çŸ¥è¯†æ ‘ï¼Œæ¬¢è¿å¤§å®¶æµè§ˆå“¦ğŸ‘ğŸ‘ï¼ >
    <meta name="keywords" content= vue,JavaScript,CSS,Html >
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>
<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-home
 replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            vue3.0ç¬”è®°
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h1 id="watch-ä¸watchEffectçš„åŒºåˆ«"><a href="#watch-ä¸watchEffectçš„åŒºåˆ«" class="headerlink" title="watch ä¸watchEffectçš„åŒºåˆ«"></a>watch ä¸watchEffectçš„åŒºåˆ«</h1><h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><p>watchç”¨æ¥ç›‘å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch(source,callback,options)</span><br></pre></td></tr></table></figure>

<p>å…·ä½“çš„ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//æ— è®ºæ˜¯refå®šä¹‰çš„å¯¹è±¡è¿˜æ˜¯reactiveå®šä¹‰çš„å¯¹è±¡ï¼Œè¦ç›‘å¬å¯¹è±¡ä¸­çš„å±æ€§å€¼å˜åŒ–ï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•</span><br><span class="line">const data = ref(&#123;pageNum:1&#125;)</span><br><span class="line">const add = ()=&gt;&#123;</span><br><span class="line">  data.value.pageNum++</span><br><span class="line">&#125;</span><br><span class="line">add()</span><br><span class="line">watch(() =&gt; data.value.pageNum, (val, oldVal) =&gt; &#123;</span><br><span class="line">   if (val !== oldVal) &#123;</span><br><span class="line">     data.value.pageNum = val</span><br><span class="line">     //å½“é¡µç ä¸ä¸€æ ·è°ƒå–æ¥å£</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//å¦‚æœç›‘å¬çš„æ˜¯refå®šä¹‰çš„ç®€å•æ•°æ®ç±»å‹ï¼Œåˆ™watchçš„ç¬¬ä¸€ä¸ªå‚æ•°ç›´æ¥æ˜¯ä½ è¦ç›‘å¬çš„é‚£ä¸ªå˜é‡ï¼š</span><br><span class="line">var count = ref(0)</span><br><span class="line">watch(count, (val, oldVal) =&gt; &#123;</span><br><span class="line">   if (val !== oldVal) &#123;</span><br><span class="line">     data.value.pageNum = val</span><br><span class="line">     //å½“é¡µç ä¸ä¸€æ ·è°ƒå–æ¥å£</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½æœ‰äººä¼šè§‰å¾—ç›´æ¥æ¯æ¬¡ç›‘å¬ï¼Œéƒ½éœ€è¦å†™ä¸€éwatchå‡½æ•°ï¼Œå¾ˆéº»çƒ¦ã€‚é‚£vue3.0ä¹Ÿæä¾›äº†å¤šä¸ªæ•°æ®çš„ç›‘å¬</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">watch([()=&gt;data.value.pageNum,count],([curPage,oldPage],[curCount,oldCount])=&gt;&#123;</span><br><span class="line">	//åœ¨è¿™é‡Œåšç›‘å¬å˜åŒ–åçš„äº‹æƒ…å°±okäº†</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œå¦‚æœä½ æƒ³ä¸€å¼€å§‹å°±åœ¨å›è°ƒå‡½æ•°ä¸­åšä¸€äº›åŠ¨ä½œé‚£å°±åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­ä½¿ç”¨immediate: trueã€‚</p>
<p>å¦‚æœä½ ç›‘å¬çš„æ˜¯å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œé‚£å°±å¯ä»¥ç”¨deep:trueå¯¹æ•°æ®æ–½è¡Œæ·±åº¦ç›‘å¬ã€‚</p>
<h2 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h2><p>åœ¨è®²watchEffectä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬æ€ä¹ˆå»ç”¨å®ƒï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const childOne = ref(null)</span><br><span class="line">watchEffect(()=&gt;&#123;</span><br><span class="line">        console.log(&#x27;æ‰“å°&#x27;,childOne.value)</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        flush:&#x27;post&#x27;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>![image-20210930155922138](/Users/zlj/Library/Application Support/typora-user-images/image-20210930155922138.png)</p>
<p>è¿™é‡Œæˆ‘åŠ äº†flushè¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§ï¼Œä½ ä»æ‰“å°çš„æ—¥å¿—å°±å¯ä»¥çŸ¥é“äº†ï¼Œå¦‚æœä¸åŠ çš„è¯ï¼Œå°±ä¼šæ‰“å°æ¨¡ç‰ˆè¿˜æœªæŒ‚åœ¨çš„å€¼ï¼ŒåŠ äº†flushä¸€å®šæ˜¯æŒ‚åœ¨å®Œæ¯•æ‰ä¼šæ‰“å°</p>
<h3 id="stop"><a href="#stop" class="headerlink" title="stop"></a>stop</h3><p>åœæ­¢ç›‘å¬ï¼Œçœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯è§‰å¾—ï¼Œå†™vue2.0çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æƒ³åœæ­¢ç›‘å¬å´æ— è®¡å¯æ–½ï¼Œåªèƒ½çœ¼å·´å·´çš„ç­‰åˆ°ç»„ä»¶è¢«é”€æ¯çš„æ—¶å€™æ‰èƒ½åœæ­¢ã€‚æ˜¯ä¸æ˜¯å¾ˆæ°”å‘¢ï¼Ÿè¿™ä¸vue3.0å°±ç»™ä½ æä¾›äº†stopå‡½æ•°æ¥åœæ­¢ç›‘å¬ã€‚</p>
<p>é‚£å¦‚ä½•åœæ­¢ç›‘å¬å‘¢ï¼Œæ¯”è¾ƒç®€å•å°±æ˜¯å†è°ƒä¸€æ¬¡ä½ çš„watch()ç›‘å¬å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const stop=watch(count, (val, oldVal) =&gt; &#123;</span><br><span class="line">   if (val !== oldVal) &#123;</span><br><span class="line">     data.value.pageNum = val</span><br><span class="line">     //å½“é¡µç ä¸ä¸€æ ·è°ƒå–æ¥å£</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">//ç„¶ååœ¨æŸä¸ªå‡½æ•°ä¸­è°ƒç”¨stop()å‡½æ•°ï¼Œç›‘å¬å°±åœæ­¢äº†</span><br></pre></td></tr></table></figure>

<p>æ•´ç¯‡æ–‡ç« çš„é¢˜ç›®æ˜¯ï¼šwatch ä¸watchEffectçš„åŒºåˆ«ï¼Œè¿˜æ˜¯è¦ç‚¹ä¸€ä¸‹é¢˜çš„ï¼Œå“ˆå“ˆ</p>
<p>firstï¼šwatchEffectä¸éœ€è¦æŒ‡å®šç›‘å¬çš„å±æ€§ï¼Œè‡ªåŠ¨æ”¶é›†ä¾èµ–ï¼›</p>
<p>second:watchEffectæ‹¿ä¸åˆ°æ—§å€¼ï¼›watchå¯ä»¥æ‹¿åˆ°æ—§å€¼</p>
<p>third:watchEffectåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡å°±ä¼šæ”¶é›†ä¾èµ–ï¼Œç„¶åæ”¶é›†åˆ°çš„ä¾èµ–å‘ç”Ÿäº†å˜åŒ–ï¼Œå›è°ƒæ‰ä¼šå†æ¬¡æ‰§è¡Œï¼›watchå°±ä¸æ˜¯äº†ã€‚ä¸€å¼€å§‹å°±æŒ‡å®šäº†ä¾èµ–ã€‚</p>
<h1 id="teleport"><a href="#teleport" class="headerlink" title="teleport"></a>teleport</h1><p>é¦–å…ˆè°ˆè°ˆé€‚ç”¨åœºæ™¯ï¼šæ¯”å¦‚Dialogå³å¸Œæœ›åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼Œåˆå¸Œæœ›ä¸è¦åµŒå¥—å¤ªæ·±åˆ°å­ç»„ä»¶ä¸­ã€‚æœ‰äº›ç±»ä¼¼äºelement-uiä¸­çš„append-to-bodyã€‚å°†ç»„å»ºæ·»åŠ åˆ°bodyä¸‹é¢ã€‚</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“æœ‰æ—¶å€™æˆ‘ä»¬çš„ç»„ä»¶åµŒå¥—å¾ˆæ·±ï¼ŒDi alogçš„å®šä½å°±ä¸æ˜¯å¾ˆå¥½å®šä½ã€‚å› æ­¤vue3ç»™æˆ‘ä»¬æä¾›äº†teleportã€ä¼ é€é—¨ã€‘ï¼Œå°±æ˜¯å°†ä½ çš„ç»„ä»¶æ”¾åˆ°ä½ æƒ³è¦å®ƒå¾…ç€çš„åœ°æ–¹ã€‚</p>
<p>æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿçœ‹ä¸‹é¢ï¼š</p>
<p>1.é¦–å…ˆåœ¨é¡¹ç›®çš„index.htmlæ–‡ä»¶ä¸­æä¾›ä¸€ä¸ªæŒ‚åœ¨å…ƒç´ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;div id=&quot;dialog&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>2.ç„¶åå®šä¹‰ä¸€ä¸ªDialogç»„ä»¶ï¼š</p>
<p>æ³¨æ„toå±æ€§ï¼Œä¸€å®šæ˜¯è·Ÿindex.htmlä¸­æŒ‚è½½å…ƒç´ çš„idä¸€è‡´ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;teleport to=&quot;#dialog&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;dialog-wrapper&quot;&gt;</span><br><span class="line">                &lt;p&gt;æš‚æ— æ•°æ®å“¦&lt;/p&gt;</span><br><span class="line">                &lt;p&gt; è¯·ä½ ç¨ç­‰â€¦â€¦&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/teleport&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>æ¸²æŸ“ä¹‹åï¼Œæ£€æŸ¥å…ƒç´ ï¼Œä½ çš„Dialogç»„ä»¶å°±åœ¨appçš„åŒçº§äº†</p>
<img src="/Users/zlj/Library/Application Support/typora-user-images/image-20211007195037877.png" alt="image-20211007195037877" style="zoom:80%;" />

<h1 id="suspense"><a href="#suspense" class="headerlink" title="suspense"></a>suspense</h1><p>è¿™ä¸ªå±æ€§å‘¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¥æ§åˆ¶å‰åç«¯æ•°æ®äº¤äº’çš„å¼‚æ­¥è¿‡ç¨‹ä¸­çš„åŠ è½½åŠ¨ç”»ã€‚ä¹‹å‰æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨v-ifæ§åˆ¶ã€‚é‚£ä¹ˆæœ‰å•¦suspenseæ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>äº†è§£ä¸€ä¸‹suspenseçš„ç”¨æ³•ï¼šå®ƒæä¾›ä¸¤ä¸ª<code>template</code> slot, åˆšå¼€å§‹ä¼šæ¸²æŸ“ä¸€ä¸ª fallback çŠ¶æ€ä¸‹çš„å†…å®¹ï¼Œ ç›´åˆ°åˆ°è¾¾æŸä¸ªæ¡ä»¶åæ‰ä¼šæ¸²æŸ“ default çŠ¶æ€çš„æ­£å¼å†…å®¹ï¼Œ é€šè¿‡ä½¿ç”¨<code>Suspense</code>ç»„ä»¶è¿›è¡Œå±•ç¤ºå¼‚æ­¥æ¸²æŸ“å°±æ›´åŠ çš„ç®€å•ã€‚:::warning å¦‚æœä½¿ç”¨ <code>Suspense</code>, è¦è¿”å›ä¸€ä¸ª promise :::<code>Suspense</code> ç»„ä»¶çš„ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Â  &lt;Suspense&gt;</span><br><span class="line">      &lt;template #default&gt;</span><br><span class="line">          &lt;async-component&gt;&lt;/async-component&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #fallback&gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">              Loading...</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">&lt;/Suspense&gt;</span><br></pre></td></tr></table></figure>



    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p><h4>ç‰ˆæƒæ‰€æœ‰ Â© 2020 | ä½œè€…: yezi | ä¸»é¢˜ By <a class="theme-author" target="_blank" rel="noopener" href="https://github.com/Xunzhuo/hexo-theme-coder" style="font-size:14px; color: #969696">Coder</a></h4>
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_site_pv">æœ¬ç«™æµè§ˆæ€»è®¿é—®é‡: <span id="busuanzi_value_site_pv"></span></span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv">æœ¬ç«™è®¿é—®äººæ•°: <span id="busuanzi_value_site_uv"></span></span>
    
    <label class="el-switch el-switch-blue el-switch-sm" style="vertical-align: sub;">
        <input type="checkbox" name="switch" id="update_style">
        <span class="el-switch-style"></span>
    </label>

    <!--         <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
    document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script> -->
</p>
</div>

<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="NOsswOncKgc8HOxqo9oxIWlX-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="z1FihjWEbS8uIfUQdmCtK7zz">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
color: #698fca;
}
.v .vlist .vcard .vhead .vsys {
color: #3a3e4a;
}
.v .vlist .vcard .vh .vmeta .vat {
color: #638fd5;
}
.v .vlist .vcard .vhead .vnick {
color: #6ba1ff;
}
.v a {
color: #8696b1;
}
.v .vlist .vcard .vhead .vnick:hover {
color: #669bfc;
}
</style>
    <script type="text/javascript" color="173,174,173" opacity='1' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
</body>
</html>
